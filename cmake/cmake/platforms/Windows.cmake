#[=============================================================================[
Configuration specific to Windows operating systems.
#]=============================================================================]

include_guard(GLOBAL)

if(CMAKE_SYSTEM_NAME STREQUAL "Windows")
  ##############################################################################
  # Emulated functionality by php-src/win32.
  ##############################################################################

  # PHP has ftok() emulation implemented on Windows.
  set(HAVE_FTOK TRUE)

  # PHP has unconditional support for getcwd() on Windows.
  set(HAVE_GETCWD TRUE)

  # PHP defines getpid as _getpid on Windows.
  set(HAVE_GETPID TRUE)

  # PHP has getrusage() emulation implemented on Windows.
  set(HAVE_GETRUSAGE TRUE)

  # PHP has gettimeofday() emulation implemented on Windows.
  set(HAVE_GETTIMEOFDAY TRUE)

  # PHP has nice() emulation implemented on Windows.
  set(HAVE_NICE TRUE)

  # PHP defines strcasecmp in Zend/zend_config.w32.h.
  set(HAVE_STRCASECMP TRUE)

  # PHP has syslog.h emulation implemented on Windows.
  set(HAVE_SYSLOG_H TRUE)

  # PHP has usleep() emulation implemented on Windows.
  set(HAVE_USLEEP TRUE)

  # Windows has LoadLibrary().
  set(PHP_HAS_DYNAMIC_LOADING TRUE)

  # PHP has nanosleep() emulation implemented on Windows.
  set(PHP_HAS_NANOSLEEP TRUE)

  # PHP has socketpair() emulation implemented on Windows.
  set(PHP_HAS_SOCKETPAIR TRUE)

  ##############################################################################
  # To speed up the Windows build experience where configuration phase takes
  # much longer compared to POSIX-based environments, the following are always
  # known on Windows targets.
  ##############################################################################

  set(HAVE_ACCEPT4 FALSE)
  set(HAVE_ALPHASORT FALSE)
  set(HAVE_ARPA_INET_H FALSE)
  set(HAVE_ARPA_NAMESER_H FALSE)
  set(HAVE_ASPRINTF FALSE)
  set(HAVE_CHROOT FALSE)
  set(HAVE_CLOCK_GETTIME_NSEC_NP FALSE)
  set(HAVE_CPUID_H FALSE)
  set(HAVE_DIRENT_H FALSE)
  set(HAVE_DLFCN_H FALSE)
  set(HAVE_DNS_H FALSE)
  set(HAVE_ELF_AUX_INFO FALSE)
  set(HAVE_EXPLICIT_BZERO FALSE)
  set(HAVE_EXPLICIT_MEMSET FALSE)
  set(HAVE_FCNTL_H TRUE)
  set(HAVE_FDATASYNC FALSE)
  set(HAVE_FLOCK FALSE)
  set(HAVE_FUNOPEN FALSE)
  set(HAVE_GETGRNAM_R FALSE)
  set(HAVE_GETLOADAVG FALSE)
  set(HAVE_GETPWNAM_R FALSE)
  set(HAVE_GETPWUID_R FALSE)
  set(HAVE_GETTID FALSE)
  set(HAVE_GETWD FALSE)
  set(HAVE_GLOB FALSE)
  set(HAVE_HSTRERROR FALSE)
  set(HAVE_IEEEFP_H FALSE)
  set(HAVE_IF_INDEXTONAME FALSE)
  set(HAVE_IF_NAMETOINDEX FALSE)
  set(HAVE_IFADDRS_H FALSE)
  set(HAVE_IMMINTRIN_H TRUE)
  set(HAVE_ISSETUGID FALSE)
  set(HAVE_KILL FALSE)
  set(HAVE_LANGINFO_H FALSE)
  set(HAVE_LCHOWN FALSE)
  set(HAVE_LIBPROC_H FALSE)
  set(HAVE_LINUX_FILTER_H FALSE)
  set(HAVE_LINUX_IF_ETHER_H FALSE)
  set(HAVE_LINUX_IF_PACKET_H FALSE)
  set(HAVE_LINUX_SOCK_DIAG_H FALSE)
  set(HAVE_LINUX_UDP_H FALSE)
  set(HAVE_MEMCNTL FALSE)
  set(HAVE_MEMFD_CREATE FALSE)
  set(HAVE_MEMMEM FALSE)
  set(HAVE_MEMPCPY FALSE)
  set(HAVE_MEMRCHR FALSE)
  set(HAVE_MKSTEMP FALSE)
  set(HAVE_MMAP FALSE)
  set(HAVE_MREMAP FALSE)
  set(HAVE_NET_IF_H FALSE)
  set(HAVE_NETDB_H FALSE)
  set(HAVE_NETINET_IN_H FALSE)
  set(HAVE_NL_LANGINFO FALSE)
  set(HAVE_NMMINTRIN_H TRUE)
  set(HAVE_POLL FALSE)
  set(HAVE_POLL_H FALSE)
  set(HAVE_POSIX_SPAWN_FILE_ACTIONS_ADDCHDIR_NP FALSE)
  set(HAVE_PRCTL FALSE)
  set(HAVE_PROCCTL FALSE)
  set(HAVE_PTHREAD_ATTR_GET_NP FALSE)
  set(HAVE_PTHREAD_ATTR_GETSTACK FALSE)
  set(HAVE_PTHREAD_GET_STACKADDR_NP FALSE)
  set(HAVE_PTHREAD_GETATTR_NP FALSE)
  set(HAVE_PTHREAD_JIT_WRITE_PROTECT_NP FALSE)
  set(HAVE_PTHREAD_STACKSEG_NP FALSE)
  set(HAVE_PTY_H FALSE)
  set(HAVE_PUTENV TRUE)
  set(HAVE_PWD_H FALSE)
  set(HAVE_REALLOCARRAY FALSE)
  set(HAVE_RESOLV_H FALSE)
  set(HAVE_SCANDIR FALSE)
  set(HAVE_SETENV FALSE)
  set(HAVE_SETITIMER FALSE)
  set(HAVE_SETPROCTITLE FALSE)
  set(HAVE_SHM_CREATE_LARGEPAGE FALSE)
  set(HAVE_SIGPROCMASK FALSE)
  set(HAVE_SIZEOF_GID_T FALSE)
  set(HAVE_SIZEOF_UID_T FALSE)
  set(HAVE_SOCKATMARK FALSE)
  set(HAVE_SOCKLEN_T TRUE)
  set(HAVE_STATFS FALSE)
  set(HAVE_STATVFS FALSE)
  set(HAVE_STD_SYSLOG FALSE)
  set(HAVE_STDDEF_H TRUE) # Defined by check_type_size().
  set(HAVE_STDINT_H TRUE) # Defined by check_type_size().
  set(HAVE_STRINGS_H FALSE)
  set(HAVE_STRLCAT FALSE)
  set(HAVE_STRLCPY FALSE)
  set(HAVE_STRNLEN TRUE)
  set(HAVE_STRUCT_CMSGCRED FALSE)
  set(HAVE_STRUCT_FLOCK FALSE)
  set(HAVE_STRUCT_SOCKADDR_SA_LEN FALSE)
  set(HAVE_STRUCT_SOCKADDR_STORAGE FALSE)
  set(HAVE_STRUCT_SOCKADDR_STORAGE_SS_FAMILY FALSE)
  set(HAVE_STRUCT_SOCKADDR_UN_SUN_LEN FALSE)
  set(HAVE_STRUCT_STAT_ST_BLKSIZE FALSE)
  set(HAVE_STRUCT_STAT_ST_BLOCKS FALSE)
  set(HAVE_STRUCT_STAT_ST_RDEV TRUE)
  set(HAVE_STRUCT_TM_TM_GMTOFF FALSE)
  set(HAVE_STRUCT_TM_TM_ZONE FALSE)
  set(HAVE_STRUCT_UCRED FALSE)
  set(HAVE_SYMLINK FALSE)
  set(HAVE_SYS_FILE_H FALSE)
  set(HAVE_SYS_IOCTL_H FALSE)
  set(HAVE_SYS_IPC_H FALSE)
  set(HAVE_SYS_LOADAVG_H FALSE)
  set(HAVE_SYS_MMAN_H FALSE)
  set(HAVE_SYS_MOUNT_H FALSE)
  set(HAVE_SYS_PARAM_H FALSE)
  set(HAVE_SYS_POLL_H FALSE)
  set(HAVE_SYS_PSTAT_H FALSE)
  set(HAVE_SYS_RESOURCE_H FALSE)
  set(HAVE_SYS_SELECT_H FALSE)
  set(HAVE_SYS_SOCKET_H FALSE)
  set(HAVE_SYS_SOCKIO_H FALSE)
  set(HAVE_SYS_STAT_H TRUE)
  set(HAVE_SYS_STATFS_H FALSE)
  set(HAVE_SYS_STATVFS_H FALSE)
  set(HAVE_SYS_SYSEXITS_H FALSE)
  set(HAVE_SYS_TIME_H FALSE)
  set(HAVE_SYS_TYPES_H TRUE)
  set(HAVE_SYS_UIO_H FALSE)
  set(HAVE_SYS_UTSNAME_H FALSE)
  set(HAVE_SYS_VFS_H FALSE)
  set(HAVE_SYS_WAIT_H FALSE)
  set(HAVE_SYSEXITS_H FALSE)
  set(HAVE_TMMINTRIN_H TRUE)
  set(HAVE_TZSET TRUE)
  set(HAVE_UNIX_H FALSE)
  set(HAVE_UNSETENV FALSE)
  set(HAVE_UTIME TRUE)
  set(HAVE_UTIME_H FALSE)
  set(HAVE_VASPRINTF FALSE)
  set(HAVE_WMMINTRIN_H TRUE)
  set(HAVE_WS2TCPIP_H TRUE)
  set(PHP_EXT_DATE_HAS_FWRAP FALSE)
  set(PHP_EXT_FILEINFO_HAVE_STRCASESTR FALSE)
  set(PHP_EXT_FILEINFO_HAVE_STRNDUP FALSE)
  set(PHP_EXT_FILEINFO_HAVE_UTIMES FALSE)
  set(PHP_EXT_GD_HAS_FLOORF TRUE)
  set(PHP_EXT_OPCACHE_HAS_FLOOR TRUE)
  set(PHP_EXT_OPCACHE_HAVE_MPROTECT FALSE)
  set(PHP_EXT_RANDOM_HAVE_COMMONCRYPTO_COMMONRANDOM_H FALSE)
  set(PHP_EXT_RANDOM_HAVE_ARC4RANDOM_BUF FALSE)
  set(PHP_EXT_RANDOM_HAVE_GETRANDOM FALSE)
  set(PHP_HAS_DN_EXPAND FALSE)
  set(PHP_HAS_DN_SKIPNAME FALSE)
  set(PHP_HAS_DNS_SEARCH FALSE)
  set(PHP_HAS_EBCDIC FALSE)
  set(PHP_HAS_ELF FALSE)
  set(PHP_HAS_FFP_CONTRACT_OFF_C FALSE)
  set(PHP_HAS_FNO_COMMON_C FALSE)
  set(PHP_HAS_FNO_COMMON_CXX FALSE)
  set(PHP_HAS_GAI_STRERROR FALSE)
  set(PHP_HAS_GETADDRINFO TRUE)
  set(PHP_HAS_GETADDRINFO_LIBRARY ws2_32)
  set(PHP_HAS_GETADDRINFO_SYMBOL TRUE)
  set(PHP_HAS_GETHOSTBYADDR TRUE)
  set(PHP_HAS_GETHOSTBYADDR_LIBRARY ws2_32)
  set(PHP_HAS_GETHOSTBYNAME_R FALSE)
  set(PHP_HAS_GETHOSTNAME TRUE)
  set(PHP_HAS_GETHOSTNAME_LIBRARY ws2_32)
  set(PHP_HAS_GETIFADDRS_SYMBOL FALSE)
  set(PHP_HAS_GETPROTOBYNAME TRUE)
  set(PHP_HAS_GETPROTOBYNAME_LIBRARY ws2_32)
  set(PHP_HAS_GETPROTOBYNUMBER TRUE)
  set(PHP_HAS_GETPROTOBYNUMBER_LIBRARY ws2_32)
  set(PHP_HAS_GETSERVBYNAME TRUE)
  set(PHP_HAS_GETSERVBYNAME_LIBRARY ws2_32)
  set(PHP_HAS_GETSERVBYPORT TRUE)
  set(PHP_HAS_GETSERVBYPORT_LIBRARY ws2_32)
  set(PHP_HAS_INET_NTOP TRUE)
  set(PHP_HAS_INET_NTOP_LIBRARY ws2_32)
  set(PHP_HAS_INET_PTON TRUE)
  set(PHP_HAS_INET_PTON_LIBRARY ws2_32)
  set(PHP_HAS_OPENPTY FALSE)
  set(PHP_HAS_PTHREAD_NP_H FALSE)
  set(PHP_HAS_RES_9_DN_SKIPNAME FALSE)
  set(PHP_HAS_RES_NDESTROY FALSE)
  set(PHP_HAS_RES_NSEARCH FALSE)
  set(PHP_HAS_RES_SEARCH FALSE)
  set(PHP_HAS_SETSOCKOPT TRUE)
  set(PHP_HAS_SETSOCKOPT_LIBRARY ws2_32)
  set(PHP_HAS_SHUTDOWN TRUE)
  set(PHP_HAS_SHUTDOWN_LIBRARY ws2_32)
  set(PHP_HAS_SIN TRUE)
  set(PHP_HAS_SOCKET TRUE)
  set(PHP_HAS_SOCKET_LIBRARY ws2_32)
  set(PHP_HAS_VERBOSE_LINKER_FLAG_C TRUE)
  set(PHP_HAS_VERBOSE_LINKER_FLAG_CXX TRUE)
  set(PHP_HAS_WDUPLICATED_COND_C FALSE)
  set(PHP_HAS_WDUPLICATED_COND_CXX FALSE)
  set(PHP_HAS_WEXTRA_C FALSE)
  set(PHP_HAS_WEXTRA_CXX FALSE)
  set(PHP_HAS_WFORMAT_TRUNCATION_C FALSE)
  set(PHP_HAS_WFORMAT_TRUNCATION_CXX FALSE)
  set(PHP_HAS_WIMPLICIT_FALLTHROUGH_1_C FALSE)
  set(PHP_HAS_WIMPLICIT_FALLTHROUGH_1_CXX FALSE)
  set(PHP_HAS_WLOGICAL_OP_C FALSE)
  set(PHP_HAS_WLOGICAL_OP_CXX FALSE)
  set(PHP_HAS_WNO_CLOBBERED_C FALSE)
  set(PHP_HAS_WNO_CLOBBERED_CXX FALSE)
  set(PHP_HAS_WNO_IMPLICIT_FALLTHROUGH_C FALSE)
  set(PHP_HAS_WNO_SIGN_COMPARE_C FALSE)
  set(PHP_HAS_WNO_SIGN_COMPARE_CXX FALSE)
  set(PHP_HAS_WNO_UNUSED_PARAMETER_C FALSE)
  set(PHP_HAS_WNO_UNUSED_PARAMETER_CXX FALSE)
  set(PHP_HAS_WSTRICT_PROTOTYPES_C FALSE)
  set(PHP_HAVE_CREATEPROCESS TRUE)
  set(PHP_HAVE_FORK FALSE)
  set(PHP_HAVE_GRP_H FALSE)
  set(PHP_HAVE_UNISTD_H FALSE)
  set(PHP_SAPI_CLI_HAVE_PS_STRINGS FALSE)
  set(PHP_SAPI_PHPDBG_HAS_UFFDIO_WRITEPROTECT_MODE_WP FALSE)
  set(PHP_ZEND_HAS_PGRAB FALSE)

  set(HAVE_SIZEOF_INT TRUE)
  set(SIZEOF_INT 4)

  set(HAVE_SIZEOF_LONG TRUE)
  set(SIZEOF_LONG 4)

  set(HAVE_SIZEOF_LONG_LONG TRUE)
  set(SIZEOF_LONG_LONG 8)

  set(HAVE_SIZEOF_OFF_T TRUE)
  set(SIZEOF_OFF_T 4)

  set(HAVE_SIZEOF_SIZE_T TRUE)
  if(CMAKE_SIZEOF_VOID_P EQUAL 4)
    set(SIZEOF_SIZE_T 4)
  else()
    set(SIZEOF_SIZE_T 8)
  endif()
endif()
