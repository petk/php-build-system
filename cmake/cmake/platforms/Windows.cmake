#[=============================================================================[
Configuration specific to Windows operating systems.
#]=============================================================================]

include_guard(GLOBAL)

if(CMAKE_SYSTEM_NAME STREQUAL "Windows")
  ##############################################################################
  # Emulated functionality by php-src/win32.
  ##############################################################################

  # PHP has ftok() emulation implemented on Windows.
  set(PHP_HAVE_FTOK TRUE)

  # PHP has unconditional support for getcwd() on Windows.
  set(PHP_HAVE_GETCWD TRUE)

  # PHP has getrusage() emulation implemented on Windows.
  set(PHP_HAVE_GETRUSAGE TRUE)

  # PHP has gettimeofday() emulation implemented on Windows.
  set(PHP_HAVE_GETTIMEOFDAY TRUE)

  # PHP has glob() emulation implemented on Windows.
  set(PHP_HAVE_GLOB TRUE)

  # Windows has LoadLibrary().
  set(PHP_HAVE_LIBDL TRUE)

  # PHP has nanosleep() emulation implemented on Windows.
  set(PHP_HAVE_NANOSLEEP TRUE)

  # PHP has nice() emulation implemented on Windows.
  set(PHP_HAVE_NICE TRUE)

  # PHP has socketpair() emulation implemented on Windows.
  set(PHP_HAVE_SOCKETPAIR TRUE)

  # PHP defines strcasecmp in Zend/zend_config.w32.h.
  set(PHP_HAVE_STRCASECMP TRUE)

  # PHP has syslog.h emulation implemented on Windows.
  set(PHP_HAVE_SYSLOG_H TRUE)

  # PHP has usleep() emulation implemented on Windows.
  set(PHP_HAVE_USLEEP TRUE)

  # PHP defines getpid as _getpid on Windows.
  set(PHP_ZEND_HAVE_GETPID TRUE)

  ##############################################################################
  # To speed up the Windows build experience where configuration phase takes
  # much longer compared to POSIX-based environments, the following are always
  # known on Windows targets.
  ##############################################################################

  set(HAVE_PHP_EXT_SOCKETS_STRUCT_CMSGCRED FALSE)
  set(HAVE_PHP_EXT_SOCKETS_STRUCT_UCRED FALSE)
  set(HAVE_PHP_STRUCT_SOCKADDR_STORAGE FALSE)
  set(HAVE_SIZEOF_GID_T FALSE)
  set(HAVE_SIZEOF_SSIZE_T FALSE)
  set(HAVE_SIZEOF_UID_T FALSE)
  set(HAVE_SOCKLEN_T TRUE)
  set(HAVE_STDDEF_H TRUE) # Defined by check_type_size().
  set(HAVE_STDINT_H TRUE) # Defined by check_type_size().
  set(HAVE_STRUCT_FLOCK FALSE)
  set(HAVE_SYS_TYPES_H TRUE) # Defined by check_type_size().
  set(PHP_EXT_FILEINFO_HAVE_STRCASESTR FALSE)
  set(PHP_EXT_FILEINFO_HAVE_STRNDUP FALSE)
  set(PHP_EXT_FILEINFO_HAVE_UTIMES FALSE)
  set(PHP_EXT_GD_HAS_FLOORF TRUE)
  set(PHP_EXT_OPCACHE_HAVE_FLOOR TRUE)
  set(PHP_EXT_OPCACHE_HAVE_MPROTECT FALSE)
  set(PHP_EXT_RANDOM_HAVE_COMMONCRYPTO_COMMONRANDOM_H FALSE)
  set(PHP_EXT_RANDOM_HAVE_DECL_ARC4RANDOM_BUF FALSE)
  set(PHP_EXT_RANDOM_HAVE_GETRANDOM FALSE)
  set(PHP_EXT_SOCKETS_HAVE_HSTRERROR FALSE)
  set(PHP_EXT_SOCKETS_HAVE_IF_INDEXTONAME FALSE)
  set(PHP_EXT_SOCKETS_HAVE_IF_NAMETOINDEX FALSE)
  set(PHP_EXT_SOCKETS_HAVE_LINUX_FILTER_H FALSE)
  set(PHP_EXT_SOCKETS_HAVE_SA_SS_FAMILY FALSE)
  set(PHP_EXT_SOCKETS_HAVE_SOCKATMARK FALSE)
  set(PHP_EXT_SOCKETS_HAVE_SYS_SOCKIO_H FALSE)
  set(PHP_HAS_EBCDIC FALSE)
  set(PHP_HAS_FFP_CONTRACT_OFF_C FALSE)
  set(PHP_HAS_FNO_COMMON_C FALSE)
  set(PHP_HAS_FNO_COMMON_CXX FALSE)
  set(PHP_HAS_GETHOSTBYADDR TRUE)
  set(PHP_HAS_GETHOSTBYADDR_LIBRARY ws2_32)
  set(PHP_HAS_GETHOSTBYNAME_R FALSE)
  set(PHP_HAS_INET_ATON FALSE)
  set(PHP_HAS_INET_NTOA FALSE)
  set(PHP_HAS_INET_NTOP TRUE)
  set(PHP_HAS_INET_NTOP_LIBRARY ws2_32)
  set(PHP_HAS_INET_PTON TRUE)
  set(PHP_HAS_INET_PTON_LIBRARY ws2_32)
  set(PHP_HAS_SIN TRUE)
  set(PHP_HAS_VERBOSE_LINKER_FLAG_C TRUE)
  set(PHP_HAS_VERBOSE_LINKER_FLAG_CXX TRUE)
  set(PHP_HAS_WDUPLICATED_COND_C FALSE)
  set(PHP_HAS_WDUPLICATED_COND_CXX FALSE)
  set(PHP_HAS_WEXTRA_C FALSE)
  set(PHP_HAS_WEXTRA_CXX FALSE)
  set(PHP_HAS_WFORMAT_TRUNCATION_C FALSE)
  set(PHP_HAS_WFORMAT_TRUNCATION_CXX FALSE)
  set(PHP_HAS_WIMPLICIT_FALLTHROUGH_1_C FALSE)
  set(PHP_HAS_WIMPLICIT_FALLTHROUGH_1_CXX FALSE)
  set(PHP_HAS_WLOGICAL_OP_C FALSE)
  set(PHP_HAS_WLOGICAL_OP_CXX FALSE)
  set(PHP_HAS_WNO_CLOBBERED_C FALSE)
  set(PHP_HAS_WNO_CLOBBERED_CXX FALSE)
  set(PHP_HAS_WNO_IMPLICIT_FALLTHROUGH_C FALSE)
  set(PHP_HAS_WNO_SIGN_COMPARE_C FALSE)
  set(PHP_HAS_WNO_SIGN_COMPARE_CXX FALSE)
  set(PHP_HAS_WNO_TYPEDEF_REDEFINITION FALSE)
  set(PHP_HAS_WNO_UNUSED_PARAMETER_C FALSE)
  set(PHP_HAS_WNO_UNUSED_PARAMETER_CXX FALSE)
  set(PHP_HAS_WSTRICT_PROTOTYPES_C FALSE)
  set(PHP_HAVE_ALPHASORT FALSE)
  set(PHP_HAVE_ARPA_INET_H FALSE)
  set(PHP_HAVE_ARPA_NAMESER_H FALSE)
  set(PHP_HAVE_ASPRINTF FALSE)
  set(PHP_HAVE_CHROOT FALSE)
  set(PHP_HAVE_CREATEPROCESS TRUE)
  set(PHP_HAVE_DIRENT_H FALSE)
  set(PHP_HAVE_DLFCN_H FALSE)
  set(PHP_HAVE_DN_EXPAND FALSE)
  set(PHP_HAVE_DN_SKIPNAME FALSE)
  set(PHP_HAVE_DNS_H FALSE)
  set(PHP_HAVE_DNS_SEARCH FALSE)
  set(PHP_HAVE_EXPLICIT_BZERO FALSE)
  set(PHP_HAVE_EXPLICIT_MEMSET FALSE)
  set(PHP_HAVE_FCNTL_H TRUE)
  set(PHP_HAVE_FDATASYNC FALSE)
  set(PHP_HAVE_FLOCK FALSE)
  set(PHP_HAVE_FORK FALSE)
  set(PHP_HAVE_FUNOPEN FALSE)
  set(PHP_HAVE_GAI_STRERROR FALSE)
  set(PHP_HAVE_GETGRNAM_R FALSE)
  set(PHP_HAVE_GETHOSTNAME TRUE)
  set(PHP_HAVE_GETHOSTNAME_LIBRARY ws2_32)
  set(PHP_HAVE_GETIFADDRS FALSE)
  set(PHP_HAVE_GETLOADAVG FALSE)
  set(PHP_HAVE_GETPROTOBYNAME TRUE)
  set(PHP_HAVE_GETPROTOBYNAME_LIBRARY ws2_32)
  set(PHP_HAVE_GETPROTOBYNUMBER TRUE)
  set(PHP_HAVE_GETPROTOBYNUMBER_LIBRARY ws2_32)
  set(PHP_HAVE_GETPWNAM_R FALSE)
  set(PHP_HAVE_GETPWUID_R FALSE)
  set(PHP_HAVE_GETSERVBYNAME TRUE)
  set(PHP_HAVE_GETSERVBYNAME_LIBRARY ws2_32)
  set(PHP_HAVE_GETSERVBYPORT TRUE)
  set(PHP_HAVE_GETSERVBYPORT_LIBRARY ws2_32)
  set(PHP_HAVE_GETWD FALSE)
  set(PHP_HAVE_GRP_H FALSE)
  set(PHP_HAVE_IEEEFP_H FALSE)
  set(PHP_HAVE_IFADDRS_H FALSE)
  set(PHP_HAVE_IMMINTRIN_H TRUE)
  set(PHP_HAVE_LANGINFO_H FALSE)
  set(PHP_HAVE_LCHOWN FALSE)
  set(PHP_HAVE_LINUX_SOCK_DIAG_H FALSE)
  set(PHP_HAVE_MEMCNTL FALSE)
  set(PHP_HAVE_MEMFD_CREATE FALSE)
  set(PHP_HAVE_MEMMEM FALSE)
  set(PHP_HAVE_MEMRCHR FALSE)
  set(PHP_HAVE_MKSTEMP FALSE)
  set(PHP_HAVE_MMAP FALSE)
  set(PHP_HAVE_NET_IF_H FALSE)
  set(PHP_HAVE_NETDB_H FALSE)
  set(PHP_HAVE_NETINET_IN_H FALSE)
  set(PHP_HAVE_NL_LANGINFO FALSE)
  set(PHP_HAVE_NMMINTRIN_H TRUE)
  set(PHP_HAVE_OPENPTY FALSE)
  set(PHP_HAVE_OS_SIGNPOST_H FALSE)
  set(PHP_HAVE_POLL FALSE)
  set(PHP_HAVE_POLL_H FALSE)
  set(PHP_HAVE_POSIX_SPAWN_FILE_ACTIONS_ADDCHDIR_NP FALSE)
  set(PHP_HAVE_PRCTL FALSE)
  set(PHP_HAVE_PROCCTL FALSE)
  set(PHP_HAVE_PTHREAD_JIT_WRITE_PROTECT_NP FALSE)
  set(PHP_HAVE_PTY_H FALSE)
  set(PHP_HAVE_PUTENV TRUE)
  set(PHP_HAVE_PWD_H FALSE)
  set(PHP_HAVE_RES_9_DN_SKIPNAME FALSE)
  set(PHP_HAVE_RES_NDESTROY FALSE)
  set(PHP_HAVE_RES_NSEARCH FALSE)
  set(PHP_HAVE_RES_SEARCH FALSE)
  set(PHP_HAVE_RESOLV_H FALSE)
  set(PHP_HAVE_SCANDIR FALSE)
  set(PHP_HAVE_SETENV FALSE)
  set(PHP_HAVE_SETITIMER FALSE)
  set(PHP_HAVE_SETSOCKOPT TRUE)
  set(PHP_HAVE_SETSOCKOPT_LIBRARY ws2_32)
  set(PHP_HAVE_SHUTDOWN TRUE)
  set(PHP_HAVE_SHUTDOWN_LIBRARY ws2_32)
  set(PHP_HAVE_SIGPROCMASK FALSE)
  set(PHP_HAVE_SOCKET TRUE)
  set(PHP_HAVE_SOCKET_LIBRARY ws2_32)
  set(PHP_HAVE_STATFS FALSE)
  set(PHP_HAVE_STATVFS FALSE)
  set(PHP_HAVE_STD_SYSLOG FALSE)
  set(PHP_HAVE_STRINGS_H FALSE)
  set(PHP_HAVE_STRLCAT FALSE)
  set(PHP_HAVE_STRLCPY FALSE)
  set(PHP_HAVE_STRUCT_SOCKADDR_SA_LEN FALSE)
  set(PHP_HAVE_STRUCT_STAT_ST_BLKSIZE FALSE)
  set(PHP_HAVE_STRUCT_STAT_ST_BLOCKS FALSE)
  set(PHP_HAVE_STRUCT_STAT_ST_RDEV TRUE)
  set(PHP_HAVE_STRUCT_TM_TM_GMTOFF FALSE)
  set(PHP_HAVE_STRUCT_TM_TM_ZONE FALSE)
  set(PHP_HAVE_SYMLINK FALSE)
  set(PHP_HAVE_SYS_FILE_H FALSE)
  set(PHP_HAVE_SYS_IOCTL_H FALSE)
  set(PHP_HAVE_SYS_IPC_H FALSE)
  set(PHP_HAVE_SYS_LOADAVG_H FALSE)
  set(PHP_HAVE_SYS_MMAN_H FALSE)
  set(PHP_HAVE_SYS_MOUNT_H FALSE)
  set(PHP_HAVE_SYS_PARAM_H FALSE)
  set(PHP_HAVE_SYS_POLL_H FALSE)
  set(PHP_HAVE_SYS_PROCCTL_H FALSE)
  set(PHP_HAVE_SYS_RESOURCE_H FALSE)
  set(PHP_HAVE_SYS_SELECT_H FALSE)
  set(PHP_HAVE_SYS_SOCKET_H FALSE)
  set(PHP_HAVE_SYS_STAT_H TRUE)
  set(PHP_HAVE_SYS_STATFS_H FALSE)
  set(PHP_HAVE_SYS_STATVFS_H FALSE)
  set(PHP_HAVE_SYS_SYSEXITS_H FALSE)
  set(PHP_HAVE_SYS_TIME_H FALSE)
  set(PHP_HAVE_SYS_TYPES_H TRUE)
  set(PHP_HAVE_SYS_UIO_H FALSE)
  set(PHP_HAVE_SYS_UTSNAME_H FALSE)
  set(PHP_HAVE_SYS_VFS_H FALSE)
  set(PHP_HAVE_SYS_WAIT_H FALSE)
  set(PHP_HAVE_SYSEXITS_H FALSE)
  set(PHP_HAVE_TMMINTRIN_H TRUE)
  set(PHP_HAVE_TZSET TRUE)
  set(PHP_HAVE_UNISTD_H FALSE)
  set(PHP_HAVE_UNIX_H FALSE)
  set(PHP_HAVE_UNSETENV FALSE)
  set(PHP_HAVE_UTIME TRUE)
  set(PHP_HAVE_UTIME_H FALSE)
  set(PHP_HAVE_VASPRINTF FALSE)
  set(PHP_HAVE_WMMINTRIN_H TRUE)
  set(PHP_HAVE_WS2TCPIP_H TRUE)
  set(PHP_SAPI_CGI_HAVE_STRUCT_SOCKADDR_UN_SUN_LEN FALSE)
  set(PHP_SAPI_CLI_HAVE_PS_STRINGS FALSE)
  set(PHP_SAPI_CLI_HAVE_SYS_PSTAT_H FALSE)
  set(PHP_SAPI_HAVE_SETPROCTITLE FALSE)
  set(PHP_SAPI_PHPDBG_HAS_UFFDIO_WRITEPROTECT_MODE_WP FALSE)
  set(PHP_ZEND_HAVE_CPUID_H FALSE)
  set(PHP_ZEND_HAVE_GETTID FALSE)
  set(PHP_ZEND_HAVE_KILL FALSE)
  set(PHP_ZEND_HAVE_MREMAP FALSE)
  set(PHP_ZEND_HAVE_PTHREAD_ATTR_GET_NP FALSE)
  set(PHP_ZEND_HAVE_PTHREAD_ATTR_GETSTACK FALSE)
  set(PHP_ZEND_HAVE_PTHREAD_GET_STACKADDR_NP FALSE)
  set(PHP_ZEND_HAVE_PTHREAD_GETATTR_NP FALSE)
  set(PHP_ZEND_HAVE_PTHREAD_NP_H FALSE)
  set(PHP_ZEND_HAVE_PTHREAD_STACKSEG_NP FALSE)
  set(PHP_ZEND_HAVE_SIGSETJMP FALSE) # Windows has setjmp() in <setjmp.h>.
  set(PHP_ZEND_HAVE_STRNLEN TRUE)

  set(HAVE_SIZEOF_INT TRUE)
  set(SIZEOF_INT 4)

  set(HAVE_SIZEOF_LONG TRUE)
  set(SIZEOF_LONG 4)

  set(HAVE_SIZEOF_LONG_LONG TRUE)
  set(SIZEOF_LONG_LONG 8)

  set(HAVE_SIZEOF_OFF_T TRUE)
  set(SIZEOF_OFF_T 4)

  set(HAVE_SIZEOF_SIZE_T TRUE)
  set(HAVE_SIZEOF_PTRDIFF_T TRUE)
  if(CMAKE_SIZEOF_VOID_P EQUAL 4)
    set(SIZEOF_PTRDIFF_T 4)
    set(SIZEOF_SIZE_T 4)
  else()
    set(SIZEOF_PTRDIFF_T 8)
    set(SIZEOF_SIZE_T 8)
  endif()
endif()
